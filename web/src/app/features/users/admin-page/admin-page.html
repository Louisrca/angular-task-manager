@if (message()) {
<div class="mb-3 rounded-md border border-green-200 bg-green-50 px-4 py-2 text-green-700">
    {{ message() }}
</div>
}
<div class="flex justify-center mt-10">
    <div class="relative overflow-x-auto bg-white shadow-md rounded-xl border border-slate-200 w-full max-w-4xl">

        <table class="w-full text-sm text-left text-slate-700">
            <thead class="bg-slate-100 border-b">
                <tr>
                    <th class="px-6 py-3 font-semibold">Username</th>
                    <th class="px-6 py-3 font-semibold text-center">Rôle</th>
                    <th class="px-6 py-3 font-semibold text-center">Tâches</th>
                    <th class="px-6 py-3 font-semibold text-center">Actions</th>
                </tr>
            </thead>

            <tbody>
                @for (user of users(); track user.id) {
                <tr [style.display]="hiddenUserId() === user.id ? 'none' : ''"
                    class="border-b last:border-b-0 hover:bg-slate-50 transition-colors">

                    <td class="px-6 py-4 font-medium text-slate-900">
                        {{ user.username }}
                    </td>

                    <td class="px-6 py-4 text-center">
                        <span class="inline-flex items-center rounded-full px-3 py-1 text-xs font-medium"
                            [class.bg-red-100]="user.role === 'ADMIN'" [class.text-red-700]="user.role === 'ADMIN'"
                            [class.bg-blue-100]="user.role !== 'ADMIN'" [class.text-blue-700]="user.role !== 'ADMIN'">
                            {{ user.role }}
                        </span>
                    </td>

                    <td class="px-6 py-4 text-center">
                        <span class="inline-flex items-center rounded-full px-3 py-1 text-xs font-medium"
                            [class.bg-red-100]="user.role === 'ADMIN'" [class.text-red-700]="user.role === 'ADMIN'"
                            [class.bg-blue-100]="user.role !== 'ADMIN'" [class.text-blue-700]="user.role !== 'ADMIN'">
                            {{ getTaskCount(user.id) }}
                        </span>
                    </td>
                    @if(isCurrentUser(user.username)){

                    <td class="px-6 py-4 text-center">
                        <button (click)="deleteUser({
                        id: user.id,
                        username: user.username,
                        role: user.role
                        })" type="button"
                            class="inline-flex items-center gap-1 rounded-md bg-red-600 px-3 py-1.5 text-white text-xs hover:bg-red-700 transition-colors">
                            Supprimer
                        </button>
                    </td>
                    }
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>
