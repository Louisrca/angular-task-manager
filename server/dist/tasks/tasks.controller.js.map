{"version":3,"sources":["../../src/tasks/tasks.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Body,\n  Patch,\n  Param,\n  Delete,\n  ParseIntPipe,\n  UseGuards,\n  Request,\n} from '@nestjs/common';\nimport { TasksService } from './tasks.service';\nimport { CreateTaskDto } from './dto/create-task.dto';\nimport { UpdateTaskDto } from './dto/update-task.dto';\nimport { ApiTags, ApiOperation, ApiResponse, ApiBearerAuth } from '@nestjs/swagger';\nimport { JwtAuthGuard } from '../auth/jwt-auth.guard';\nimport { RolesGuard } from '../auth/roles.guard';\nimport { Task } from './entities/task.entity';\n\n@ApiTags('Tâches')\n@ApiBearerAuth()\n@UseGuards(JwtAuthGuard, RolesGuard)\n@Controller('tasks')\nexport class TasksController {\n  constructor(private readonly tasksService: TasksService) {}\n\n  @Post()\n  @ApiOperation({ summary: 'Créer une tâche' })\n  @ApiResponse({\n    status: 201,\n    description: 'La tâche a été créée avec succès.',\n    type: Task,\n  })\n  @ApiResponse({ status: 400, description: 'Données invalides.' })\n  @ApiResponse({ status: 401, description: 'Non authentifié.' })\n  create(@Body() createTaskDto: CreateTaskDto, @Request() req) {\n    return this.tasksService.create(createTaskDto, req.user);\n  }\n\n  @Get()\n  @ApiOperation({ summary: 'Récupérer toutes les tâches visibles' })\n  @ApiResponse({\n    status: 200,\n    description: 'Liste des tâches (filtrées selon le rôle).',\n    type: [Task],\n  })\n  @ApiResponse({ status: 401, description: 'Non authentifié.' })\n  findAll(@Request() req) {\n    return this.tasksService.findAll(req.user);\n  }\n\n  @Get(':id')\n  @ApiOperation({ summary: 'Récupérer une tâche par son ID' })\n  @ApiResponse({\n    status: 200,\n    description: 'La tâche demandée.',\n    type: Task,\n  })\n  @ApiResponse({ status: 403, description: 'Accès interdit (cette tâche ne vous appartient pas).' })\n  @ApiResponse({ status: 404, description: 'Tâche non trouvée.' })\n  findOne(@Param('id', ParseIntPipe) id: number, @Request() req) {\n    return this.tasksService.findOne(id, req.user);\n  }\n\n  @Patch(':id')\n  @ApiOperation({ summary: 'Mettre à jour une tâche' })\n  @ApiResponse({\n    status: 200,\n    description: 'La tâche mise à jour.',\n    type: Task,\n  })\n  @ApiResponse({ status: 403, description: 'Accès interdit.' })\n  @ApiResponse({ status: 404, description: 'Tâche non trouvée.' })\n  update(\n    @Param('id', ParseIntPipe) id: number,\n    @Body() updateTaskDto: UpdateTaskDto,\n    @Request() req,\n  ) {\n    return this.tasksService.update(id, updateTaskDto, req.user);\n  }\n\n  @Delete(':id')\n  @ApiOperation({ summary: 'Supprimer une tâche' })\n  @ApiResponse({\n    status: 200,\n    description: 'Tâche supprimée avec succès.',\n  })\n  @ApiResponse({ status: 403, description: 'Accès interdit.' })\n  @ApiResponse({ status: 404, description: 'Tâche non trouvée.' })\n  remove(@Param('id', ParseIntPipe) id: number, @Request() req) {\n    return this.tasksService.remove(id, req.user);\n  }\n}"],"names":["TasksController","create","createTaskDto","req","tasksService","user","findAll","findOne","id","update","updateTaskDto","remove","summary","status","description","type","Task"],"mappings":";;;;+BAwBaA;;;eAAAA;;;wBAbN;8BACsB;+BACC;+BACA;yBACoC;8BACrC;4BACF;4BACN;;;;;;;;;;;;;;;AAMd,IAAA,AAAMA,kBAAN,MAAMA;IAYXC,OAAO,AAAQC,aAA4B,EAAE,AAAWC,GAAG,EAAE;QAC3D,OAAO,IAAI,CAACC,YAAY,CAACH,MAAM,CAACC,eAAeC,IAAIE,IAAI;IACzD;IAUAC,QAAQ,AAAWH,GAAG,EAAE;QACtB,OAAO,IAAI,CAACC,YAAY,CAACE,OAAO,CAACH,IAAIE,IAAI;IAC3C;IAWAE,QAAQ,AAA2BC,EAAU,EAAE,AAAWL,GAAG,EAAE;QAC7D,OAAO,IAAI,CAACC,YAAY,CAACG,OAAO,CAACC,IAAIL,IAAIE,IAAI;IAC/C;IAWAI,OACE,AAA2BD,EAAU,EACrC,AAAQE,aAA4B,EACpC,AAAWP,GAAG,EACd;QACA,OAAO,IAAI,CAACC,YAAY,CAACK,MAAM,CAACD,IAAIE,eAAeP,IAAIE,IAAI;IAC7D;IAUAM,OAAO,AAA2BH,EAAU,EAAE,AAAWL,GAAG,EAAE;QAC5D,OAAO,IAAI,CAACC,YAAY,CAACO,MAAM,CAACH,IAAIL,IAAIE,IAAI;IAC9C;IAnEA,YAAY,AAAiBD,YAA0B,CAAE;aAA5BA,eAAAA;IAA6B;AAoE5D;;;;QAjEkBQ,SAAS;;;QAEvBC,QAAQ;QACRC,aAAa;QACbC,MAAMC,gBAAI;;;QAEGH,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QAMzBF,SAAS;;;QAEvBC,QAAQ;QACRC,aAAa;QACbC,MAAM;YAACC,gBAAI;SAAC;;;QAECH,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAMzBF,SAAS;;;QAEvBC,QAAQ;QACRC,aAAa;QACbC,MAAMC,gBAAI;;;QAEGH,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QAMzBF,SAAS;;;QAEvBC,QAAQ;QACRC,aAAa;QACbC,MAAMC,gBAAI;;;QAEGH,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;;;QAUzBF,SAAS;;;QAEvBC,QAAQ;QACRC,aAAa;;;QAEAD,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa"}