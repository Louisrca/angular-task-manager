{"version":3,"sources":["../../src/auth/auth.controller.ts"],"sourcesContent":["import { Controller, Post, UseGuards, Request, Body } from '@nestjs/common';\nimport { AuthService } from './auth.service';\nimport { AuthGuard } from '@nestjs/passport';\nimport { AuthDto } from './dto/auth.dto';\nimport { ApiTags, ApiBody, ApiOperation, ApiResponse } from '@nestjs/swagger';\nimport { LoginResponseDto } from './dto/login-response.dto';\nimport { User } from '../users/entities/user.entity';\n\n@ApiTags('Authentification')\n@Controller('auth')\nexport class AuthController {\n  constructor(private authService: AuthService) {}\n\n  @UseGuards(AuthGuard('local'))\n  @Post('login')\n  @ApiBody({ type: AuthDto })\n  @ApiOperation({ summary: 'Se connecter (Obtenir un Token JWT)' })\n  @ApiResponse({\n    status: 201,\n    description: 'Connexion réussie.',\n    type: LoginResponseDto,\n  })\n  @ApiResponse({ status: 401, description: 'Identifiants incorrects.' })\n  async login(@Request() req) {\n    return this.authService.login(req.user);\n  }\n\n  @Post('register')\n  @ApiOperation({ summary: \"S'inscrire (Créer un nouveau compte)\" })\n  @ApiResponse({\n    status: 201,\n    description: 'Utilisateur créé avec succès.',\n    type: User,\n  })\n  @ApiResponse({ status: 400, description: 'Données invalides (mot de passe trop court, etc.).' })\n  @ApiResponse({ status: 409, description: \"Nom d'utilisateur déjà pris.\" })\n  async register(@Body() authDto: AuthDto) {\n    return this.authService.register(authDto);\n  }\n}"],"names":["AuthController","login","req","authService","user","register","authDto","type","AuthDto","summary","status","description","LoginResponseDto","User"],"mappings":";;;;+BAUaA;;;eAAAA;;;wBAV8C;6BAC/B;0BACF;yBACF;yBACoC;kCAC3B;4BACZ;;;;;;;;;;;;;;;AAId,IAAA,AAAMA,iBAAN,MAAMA;IAGX,MAUMC,MAAM,AAAWC,GAAG,EAAE;QAC1B,OAAO,IAAI,CAACC,WAAW,CAACF,KAAK,CAACC,IAAIE,IAAI;IACxC;IAEA,MASMC,SAAS,AAAQC,OAAgB,EAAE;QACvC,OAAO,IAAI,CAACH,WAAW,CAACE,QAAQ,CAACC;IACnC;IA3BA,YAAY,AAAQH,WAAwB,CAAE;aAA1BA,cAAAA;IAA2B;AA4BjD;;;;;QAxBaI,MAAMC,gBAAO;;;QACRC,SAAS;;;QAEvBC,QAAQ;QACRC,aAAa;QACbJ,MAAMK,kCAAgB;;;QAETF,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAMzBF,SAAS;;;QAEvBC,QAAQ;QACRC,aAAa;QACbJ,MAAMM,gBAAI;;;QAEGH,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa"}